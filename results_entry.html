<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Clemz Academy School - Student Results Management</title>
<!-- jsPDF -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Open+Sans&display=swap" rel="stylesheet" />
<style>
/* Reset & Base */
*{margin:0;padding:0;box-sizing:border-box}
body{
  font-family:'Open Sans',Arial,sans-serif;
  background:linear-gradient(135deg,#1a1a1a,#333);
  color:#f4f4f4; line-height:1.6;
}

/* Header */
header{
  background:linear-gradient(135deg,#0066cc,#004999);
  padding:25px 20px; text-align:center; color:#fff;
  box-shadow:0 4px 12px rgba(0,0,0,0.3);
}
header h1{font-size:2.2em;font-weight:700;letter-spacing:.5px}

/* Navigation */
nav{margin-top:15px;display:flex;justify-content:center;flex-wrap:wrap;gap:10px}
nav a{
  color:#fff;text-decoration:none;padding:10px 18px;border-radius:25px;
  font-weight:600;transition:all .3s ease
}
nav a:hover{background:rgba(255,255,255,.15);transform:translateY(-2px)}
nav a.active{background:#fff;color:#0066cc;box-shadow:0 2px 6px rgba(0,0,0,.2)}

/* Main container */
main{max-width:1100px;margin:40px auto;padding:0 16px}

/* Card */
.card{
  background:#fff;color:#333;border-radius:12px;padding:24px;
  box-shadow:0 4px 15px rgba(0,0,0,.25); margin-bottom:32px
}
.card h2{color:#0066cc;text-align:center;margin-bottom:16px}

/* Form */
form{display:grid;gap:16px}
.form-grid{
  display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:16px
}
label{font-weight:600;color:#333;margin-bottom:6px;display:block}
input[type="text"],input[type="number"]{
  width:100%;padding:12px;border:1px solid #ccc;border-radius:8px;font-size:1em;
  transition:border-color .3s, box-shadow .3s
}
input:focus{
  border-color:#0066cc;outline:none;box-shadow:0 0 6px rgba(0,102,204,.4)
}
fieldset{
  border:2px solid #0066cc;border-radius:10px;padding:16px
}
legend{font-weight:700;color:#0066cc;padding:0 8px}

/* Buttons */
.btn{
  display:inline-block;background:#0066cc;color:#fff;border:none;border-radius:8px;
  padding:12px 22px;font-weight:700;cursor:pointer;font-size:1em;
  box-shadow:0 3px 6px rgba(0,0,0,.2);
  transition:background .3s, transform .2s
}
.btn:hover{background:#004999;transform:translateY(-2px)}
.btn:active{background:#003366;transform:translateY(0)}
.btn.secondary{background:#6c757d}
.btn.secondary:hover{background:#5a6268}

/* Table */
.table-wrap{overflow:auto}
table{
  width:100%;border-collapse:collapse;margin-top:12px;border-radius:8px;overflow:hidden;
  box-shadow:0 4px 15px rgba(0,0,0,.2);background:#fff;color:#333
}
th,td{padding:14px;text-align:center}
th{background:#0066cc;color:#fff}
tr:nth-child(even){background:#f9f9f9}

/* Footer */
footer{
  background:#222;color:#ccc;text-align:center;padding:20px;margin-top:50px;font-size:.95em
}

/* Small helper spacing */
.actions{margin-top:10px;text-align:center}
</style>
</head>
<body>
<header>
  <h1>Clemz Academy School - Student Results Management</h1>
  <nav>
    <a href="index.html">Home</a>
    <a href="about.html">About</a>
    <a href="services.html">Services</a>
    <a href="blog.html">Blog</a>
    <a href="contact.html">Contact</a>
    <a href="login.html">Login</a>
    <a href="logout.html">Logout</a>
    <a href="results.html" class="active">Results</a>
  </nav>
</header>

<main>
  <!-- Form Card -->
  <section class="card">
    <h2>Add Student Result</h2>
    <form id="resultForm">
      <!-- Student Info -->
      <div class="form-grid">
        <div>
          <label for="studentId">Student ID</label>
          <input type="text" id="studentId" required />
        </div>
        <div>
          <label for="studentName">Name</label>
          <input type="text" id="studentName" required />
        </div>
        <div>
          <label for="studentClass">Class</label>
          <input type="text" id="studentClass" required />
        </div>
      </div>

      <!-- Subjects -->
      <fieldset>
        <legend>Enter Marks for Subjects</legend>
        <div class="form-grid">
          <div><label for="subject_math">Mathematics</label><input type="number" id="subject_math" min="0" max="100" required /></div>
          <div><label for="subject_english">English Studies</label><input type="number" id="subject_english" min="0" max="100" required /></div>
          <div><label for="subject_hausa">Hausa/Yoruba</label><input type="number" id="subject_hausa" min="0" max="100" required /></div>
          <div><label for="subject_social">Social Studies</label><input type="number" id="subject_social" min="0" max="100" required /></div>
          <div><label for="subject_crs">Christian Religious Studies</label><input type="number" id="subject_crs" min="0" max="100" required /></div>
          <div><label for="subject_home">Home Economics</label><input type="number" id="subject_home" min="0" max="100" required /></div>
          <div><label for="subject_phe">Physical & Health Education</label><input type="number" id="subject_phe" min="0" max="100" required /></div>
          <div><label for="subject_basictech">Basic Technology</label><input type="number" id="subject_basictech" min="0" max="100" required /></div>
          <div><label for="subject_agriculture">Agricultural Science</label><input type="number" id="subject_agriculture" min="0" max="100" required /></div>
          <div><label for="subject_computer">Computer Science</label><input type="number" id="subject_computer" min="0" max="100" required /></div>
          <div><label for="subject_business">Business Studies</label><input type="number" id="subject_business" min="0" max="100" required /></div>
          <div><label for="subject_arts">Creative Arts</label><input type="number" id="subject_arts" min="0" max="100" required /></div>
          <div><label for="subject_civic">Civic Education</label><input type="number" id="subject_civic" min="0" max="100" required /></div>
        </div>
      </fieldset>

      <div class="actions">
        <button type="submit" class="btn">Add Result</button>
      </div>
    </form>
  </section>

  <!-- Results Table Card -->
  <section class="card">
    <h2>Results List</h2>
    <div class="table-wrap">
      <table id="resultsTable">
        <thead>
          <tr>
            <th>Student ID</th>
            <th>Name</th>
            <th>Class</th>
            <th>Total Score</th>
            <th>Average</th>
            <th>Grade</th>
            <th>Eff.</th>
            <th>Psych.</th>
          </tr>
        </thead>
        <tbody><!-- rows injected here --></tbody>
      </table>
    </div>

    <div class="actions">
      <button id="downloadPdf" class="btn">Download PDF</button>
      <button class="btn secondary" onclick="window.print()">Print</button>
    </div>
  </section>
</main>

<footer>
  <p>&copy; 2025 Clemz Academy School</p>
</footer>

<script>
/* Data + Helpers */
const form = document.getElementById('resultForm');
const tbody = document.querySelector('#resultsTable tbody');

form.addEventListener('submit', function(e){
  e.preventDefault();

  // Collect subjects
  const subjectIds = [
    'subject_math','subject_english','subject_hausa','subject_social',
    'subject_crs','subject_home','subject_phe','subject_basictech',
    'subject_agriculture','subject_computer','subject_business','subject_arts','subject_civic'
  ];
  const subjects = subjectIds.map(id => parseFloat(document.getElementById(id).value || 0));

  const total = subjects.reduce((s,v)=>s+v,0);
  const average = +(total / subjects.length).toFixed(2);

  let grade = '';
  if (average >= 70) grade = 'A';
  else if (average >= 60) grade = 'B+';
  else if (average >= 50) grade = 'B';
  else if (average >= 45) grade = 'C+';
  else if (average >= 40) grade = 'C';
  else grade = 'F';

  const eff = 'Good';
  const psych = 'Excellent';

  const row = document.createElement('tr');
  row.innerHTML = `
    <td>${document.getElementById('studentId').value}</td>
    <td>${document.getElementById('studentName').value}</td>
    <td>${document.getElementById('studentClass').value}</td>
    <td>${total.toFixed(2)}</td>
    <td>${average}</td>
    <td>${grade}</td>
    <td>${eff}</td>
    <td>${psych}</td>
  `;
  tbody.appendChild(row);

  form.reset();
});

/* PDF Export */
document.getElementById('downloadPdf').addEventListener('click', function () {
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF();

  // Title
  doc.setFontSize(18);
  doc.setTextColor(0, 102, 204); // #0066cc
  doc.text('Clemz Academy School - Student Results', 105, 16, { align: 'center' });

  // Headers
  const headers = ['ID','Name','Class','Total','Avg','Grade','Eff.','Psych.'];
  const colWidths = [20, 40, 22, 24, 18, 20, 24, 24];
  let xStart = 14, y = 28;

  doc.setFontSize(11);
  doc.setTextColor(0); // black
  headers.forEach((h,i)=>{ doc.text(h, xStart, y); xStart += colWidths[i]; });

  // Rows
  y += 8;
  [...tbody.querySelectorAll('tr')].forEach(tr=>{
    let x = 14;
    [...tr.children].forEach((td,i)=>{
      doc.text(String(td.textContent), x, y);
      x += colWidths[i];
    });
    y += 8;
    if (y > 280){
      doc.addPage();
      y = 20;
    }
  });

  doc.save('StudentResults.pdf');
});
</script>
</body>
</html>